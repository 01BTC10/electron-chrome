<html>
<head>
  <script src='jquery-2.1.1.min.js'></script>
  <script>
  function getQueryVariable(variable, url) {
    if (!url)
      url = window.location;
    var query = url.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    // console.log('Query variable %s not found', variable);
  }

  $(document).ready(function() {
    var state = getQueryVariable('state');
    var port = state.split('/')[0];
    var path = state.split('/')[1];
    var code = getQueryVariable('code');
    var url = 'http://localhost:' + port + '/' + path + '?code=' + code;
    var link = $('<a href="#">Click here to return to your application.</a>');
    $('#content').append(link);
    link.click(function() {
      window.location = url;
    });
  })
  </script>
</head>
<body>
  <div id='content'></div>
</body>
</html>
